<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
	<title>Learning tasks</title>
	<link rel="stylesheet" type="text/css" href="formats.css">
	<style type="text/css">
	</style>
</head>

<body>

<h1>Learning task</h1>

<p>Learning tasks are the basic element of the package to encapsulate the data set and all relevant 
information regarding the purpose of the task. This will be at least the target variable, but might 
also be information about excluded (ID) variables or case weights.</p>

<p>Currently two subclasses of a <a href="rdocs/LearnTask-class.html">LearnTask</a> exist, <a href="rdocs/ClassifTask-class.html">ClassifTask</a> 
for classification problems and <a href="rdocs/RegrTask-class.html">RegrTask</a> for regression.
A classification task is created by using the <a href="rdocs/makeClassifTask.html">makeClassifTask</a> factory method.
The target variable is converted to a factor if it is a logical, integer or character vector.
Accordingly use <a href="rdocs/makeRegrTask.html">makeRegrTask</a> for defining a regression task.
The target variable is converted to a numeric.
</p>

<p><img src="pics/learn_task.png" width="25%"  border="1" alt=""></p>

<h3>Classification example</h3>

<p>In the following example we define a classification task for the data set BreastCancer 
(from the package mlbench) and exclude the ID variable from all further model fitting and evaluation.</p>

<pre>
	library(mlbench); data(BreastCancer)
	ct <- makeClassifTask(data = BreastCancer, target = "Class", exclude = "Id")
	
	<com># Let's examine ct.</com>
	ct
	<res>
	Classification problem BreastCancer
	Features:
	numerics   integers    factors characters   logicals 
	       0          0          9          0          0 
	Observations: 699
	Missings: TRUE
	in 16 observations and 1 features
	Infinites: FALSE
	Target: Class
	Classes: 2
	benign malignant 
	   458       241 
	Positive class: benign 
	Has weights: FALSE
	Has blocking: FALSE
	</res>
</pre>

<p> The now defined task contains basic information about the data, e.g. the types of features, the 
number of observations and missing values, as well as the classification problem, e.g. the name
of the target variable and the number of observations per class. </p>

<p> As this is a binary problem, we see that a positive class is selected by default.
This will generally be the first class in the factor levels of the target.
You probably want to select this manually for your applications. </p>

<pre>
	<com># Set the positive class manually to "malignant".</com>
	ct <- makeClassifTask(data = BreastCancer, target = "Class", exclude = "Id", positive = "malignant")
</pre>

<p> There are some convenience methods to access properties of the data set and the classification
problem. Look at the documentation of <a href="rdocs/LearnTask-class.html">LearnTask</a> and its 
subclasses <a href="rdocs/ClassifTask-class.html">ClassifTask</a> and 
<a href="rdocs/RegrTask-class.html">RegrTask</a>, if you are interested in what kind of those
"getter"-functions are available. Here are some examples:</p>

<pre>
	<com># Get the names of the input variables - same for regression.</com>
	getFeatureNames(ct)

	<com># Get values of the target variable for all observations - same for regression.</com>
	getTargets(ct)

	<com># Access the data - same for regression.</com>
	getData(ct)

	<com># Get the class labels.</com>		 
	getClassLevels(ct)	
</pre>

<p> All information can be obtained from the slots of the 
<a href="rdocs/LearnTask-class.html">LearnTask</a> object directly. 
</p>

<pre>
	<com># The main part of the information is stored in the slot called desc, which stands for description.</com>
	<com># This is an object of class <a href="rdocs/TaskDesc.html">TaskDesc</a>.</com>
	ct@desc
	str(ct@desc)
	
	<com># Type of task.</com>
	ct@desc@type

	<com># Number of observations in the data.</com>
	ct@desc@size
</pre>



<p> Optionally we can include further information like observation weights and a blocking factor 
into the task. 
Via the blocking argument you can specify if some observations "belong together".
Specifically, they are either put all in the training or the test set during a resampling iteration.
The blocking argument is a factor of the same length as the number of observations in the data set 
where observations with the same factor level belong to the same block.
</p>

<pre>
	<com># Observation weights in order to upweight class "malignant" with factor 3:</com>
	w <- c(1,3)[BreastCancer$Class]
	ct <- makeClassifTask(data = BreastCancer, target = "Class", exclude = "Id", 
		positive = "malignant", weights = w)
	ct@weights
		
	<com># (Nonsensical) blocking structure:</com>
	b <- factor(rep(1:3, nrow(BreastCancer)/3))
	ct <- makeClassifTask(data = BreastCancer, target = "Class", exclude = "Id", blocking = b)
	ct@blocking
</pre>

<p>From this classification task we can now train various models, which will be covered in the 
section <a href="train.html">Training </a>. 
Before that, let's look at a regression experiment:</p>

<h3>Regression example</h3>
<pre>
	<com># We will generally take the BostonHousing data set as regression example.</com>
	library(mlbench); data(BostonHousing)
	rt <- makeRegrTask(data = BostonHousing, target = "medv")
	rt
	<res>
	Regression problem BostonHousing
	Features:
  	numerics   integers    factors characters   logicals 
    	  12          0          1          0          0 
	Observations: 506
	Missings: FALSE
	Infinites: FALSE
	Target: medv
	Has weights: FALSE
	Has blocking: FALSE
	</res>	
	
	<com># The rest works analogous to the classification task.</com>
	<com># Access more information: </com>
	<com># Get the names of the input variables.</com>
	getFeatureNames(rt)

	<com># Get target values for all observations.</com>
	getTargets(rt)

	<com># Inspect <a href="rdocs/TaskDesc.html">TaskDesc</a>.</com>
	rt@desc@target
</pre>
</body>
</html>
<!--
    <com># non-default costs for wrong predictions:</com>
	costs <- matrix (c(0, 1, 2, 0), 2, 2)
	colnames(costs) <- rownames(costs) <- classLevels(ct)
	costs
	<res>
	          benign malignant
	benign         0         2
	malignant      1         0
	</res>

	ct <- makeClassifTask(data = BreastCancer, target = "Class", exclude = "Id", costs = costs)
-->	
