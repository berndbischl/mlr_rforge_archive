

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>6. Resampling &mdash; mlr - Machine Learning in R</title>
    
    <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="mlr - Machine Learning in R" href="../index.html" />
    <link rel="up" title="Tutorial" href="index.html" />
    <link rel="next" title="7. Tuning Hyperparameters" href="tune.html" />
    <link rel="prev" title="5. Evaluating Learner Performance" href="performance.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
        <p class="logo"><a href="../index.html">
            <img class="logo" src="../_static/mlr_logo-120x64.png" alt="mlr logo"/>
        </a></p>
        <h1><a href="../index.html">mlr - Machine Learning in R</a></h1>
        <div class="rel">
          <a href="performance.html" title="5. Evaluating Learner Performance"
             accesskey="P">previous</a> |
          <a href="tune.html" title="7. Tuning Hyperparameters"
             accesskey="N">next</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="resampling">
<h1>6. Resampling<a class="headerlink" href="#resampling" title="Permalink to this headline">¶</a></h1>
<p>In order to assess the performance of a learning algorithm usually resampling
strategies are used. There are various methods how this can be done, e.g.
cross-validation and bootstrap just to mention two popular approaches.
In <strong>mlr</strong> the <a class="reference external" href="../_static/rdocs/mlr/resample.html">resample</a>-function, depending on the chosen resampling strategy,
fits the selected learner using the corresponding training sets and performs
predictions for the corresponding training/test sets and calculates the chosen
performance measures.</p>
<div class="section" id="quick-start">
<h2>6.1. Quick start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h2>
<div class="section" id="classification-example">
<h3>6.1.1. Classification example<a class="headerlink" href="#classification-example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> library<span class="p">(</span><span class="s">&quot;mlr&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="c1">## Define a learning task and a appropriate learner</span>
<span class="o">&gt;</span> task <span class="o">&lt;-</span> makeClassifTask<span class="p">(</span>data <span class="o">=</span> iris<span class="p">,</span> target <span class="o">=</span> <span class="s">&quot;Species&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> lrn <span class="o">&lt;-</span> makeLearner<span class="p">(</span><span class="s">&quot;classif.lda&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="c1">## Perform a 3-fold cross-validation</span>
<span class="o">&gt;</span> rdesc <span class="o">&lt;-</span> makeResampleDesc<span class="p">(</span><span class="s">&quot;CV&quot;</span><span class="p">,</span> iters <span class="o">=</span> <span class="m">3</span><span class="p">)</span>
<span class="o">&gt;</span> r <span class="o">&lt;-</span> resample<span class="p">(</span>lrn<span class="p">,</span> task<span class="p">,</span> rdesc<span class="p">)</span>
<span class="o">&gt;</span> r
<span class="p">$</span>measures.train
  iter mmce
<span class="m">1</span>    <span class="m">1</span>   <span class="kc">NA</span>
<span class="m">2</span>    <span class="m">2</span>   <span class="kc">NA</span>
<span class="m">3</span>    <span class="m">3</span>   <span class="kc">NA</span>

<span class="p">$</span>measures.test
  iter mmce
<span class="m">1</span>    <span class="m">1</span> <span class="m">0.02</span>
<span class="m">2</span>    <span class="m">2</span> <span class="m">0.04</span>
<span class="m">3</span>    <span class="m">3</span> <span class="m">0.00</span>

<span class="p">$</span>aggr
mmce.test.mean
          <span class="m">0.02</span>

<span class="p">$</span>pred
Resampled Prediction for:
Resample description: cross<span class="o">-</span>validation with <span class="m">3</span> iterations.
Predict: test
Stratification: <span class="kc">FALSE</span>

<span class="p">$</span>models
<span class="kc">NULL</span>

<span class="p">$</span>extract
<span class="p">$</span>extract<span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
<span class="kc">NULL</span>

<span class="p">$</span>extract<span class="p">[[</span><span class="m">2</span><span class="p">]]</span>
<span class="kc">NULL</span>

<span class="p">$</span>extract<span class="p">[[</span><span class="m">3</span><span class="p">]]</span>
<span class="kc">NULL</span>
</pre></div>
</div>
<p>In this example the peformance measure is mmce (mean misclassification error),
the default for classification. See the documentation for <a class="reference external" href="../_static/mlr/measures.html">measures</a> for a
complete list of performance measure available in <strong>mlr</strong>. More explanations
concerning the evaluation of learning methods is given in Section <a class="reference internal" href="performance.html"><em>Evaluating Learner Performance</em></a>.</p>
</div>
<div class="section" id="regression-example">
<h3>6.1.2. Regression example<a class="headerlink" href="#regression-example" title="Permalink to this headline">¶</a></h3>
<p>For the regression example the BostonHousing data set is used again.</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> library<span class="p">(</span><span class="s">&quot;mlr&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> library<span class="p">(</span><span class="s">&quot;mlbench&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> data<span class="p">(</span>BostonHousing<span class="p">)</span>
<span class="o">&gt;</span> <span class="c1">## Define a learning task and a appropriate learner</span>
<span class="o">&gt;</span> task <span class="o">&lt;-</span> makeRegrTask<span class="p">(</span>data <span class="o">=</span> BostonHousing<span class="p">,</span> target <span class="o">=</span> <span class="s">&quot;medv&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> lrn <span class="o">&lt;-</span> makeLearner<span class="p">(</span><span class="s">&quot;regr.lm&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="c1">## Perform a 3-fold cross-validation</span>
<span class="o">&gt;</span> rdesc <span class="o">&lt;-</span> makeResampleDesc<span class="p">(</span><span class="s">&quot;CV&quot;</span><span class="p">,</span> iters<span class="o">=</span><span class="m">3</span><span class="p">)</span>
<span class="o">&gt;</span> r <span class="o">&lt;-</span> resample<span class="p">(</span>lrn<span class="p">,</span> task<span class="p">,</span> rdesc<span class="p">)</span>
<span class="o">&gt;</span> r
<span class="p">$</span>measures.train
  iter mse
<span class="m">1</span>    <span class="m">1</span>  <span class="kc">NA</span>
<span class="m">2</span>    <span class="m">2</span>  <span class="kc">NA</span>
<span class="m">3</span>    <span class="m">3</span>  <span class="kc">NA</span>

<span class="p">$</span>measures.test
  iter      mse
<span class="m">1</span>    <span class="m">1</span> <span class="m">22.57254</span>
<span class="m">2</span>    <span class="m">2</span> <span class="m">21.88898</span>
<span class="m">3</span>    <span class="m">3</span> <span class="m">28.88265</span>

<span class="p">$</span>aggr
mse.test.mean
     <span class="m">24.44806</span>

<span class="p">$</span>pred
Resampled Prediction for:
Resample description: cross<span class="o">-</span>validation with <span class="m">3</span> iterations.
Predict: test
Stratification: <span class="kc">FALSE</span>

<span class="p">$</span>models
<span class="kc">NULL</span>

<span class="p">$</span>extract
<span class="p">$</span>extract<span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
<span class="kc">NULL</span>

<span class="p">$</span>extract<span class="p">[[</span><span class="m">2</span><span class="p">]]</span>
<span class="kc">NULL</span>

<span class="p">$</span>extract<span class="p">[[</span><span class="m">3</span><span class="p">]]</span>
<span class="kc">NULL</span>
</pre></div>
</div>
<p>For regression the default performance measure is mse (mean squared error).</p>
</div>
</div>
<div class="section" id="further-information">
<h2>6.2. Further information<a class="headerlink" href="#further-information" title="Permalink to this headline">¶</a></h2>
<p>Resampling strategies concern the process of sampling new data sets
from your data set <span class="math">D</span> under examination. One wants to generate
various training and test sets, which the learning method can be
fitted and validated on. Here it is assumed that every resampling
strategy consists of a couple of iterations, where for each one there
are indices into <span class="math">D</span>, defining the respective training and test
sets.
These iterations are implemented by storing the index set in a
so called <a class="reference external" href="../_static/rdocs/mlr/ResampleInstance-class.html">ResampleInstance</a> object. The reasons for having the user
create this data explicitly and not just set an option in a R function
to choose the resampling method are:</p>
<ul>
<li><p class="first">It is easier to create paired experiments, where you train and test
different methods on exactly the same sets, especially when you want
to add another method to a comparison experiment you already did.</p>
</li>
<li><p class="first">It is easy to add other resampling methods later on. You can
simply use S4 inheritance, derive from the <a class="reference external" href="../_static/rdocs/mlr/ResampleInstance-class.html">ResampleInstance</a>
class, but you do not have to touch any methods that use the
resampling strategy.</p>
<blockquote>
<div><p><img alt="Resampling illustration" class="align-middle" src="../_images/resampling.png" style="width: 40em;" /></p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="resample-descriptions-and-resample-instances">
<h2>6.3. Resample descriptions and resample instances<a class="headerlink" href="#resample-descriptions-and-resample-instances" title="Permalink to this headline">¶</a></h2>
<p>two types of objects
a <a class="reference external" href="../_static/rdocs/mlr/ResampleDesc-class.html">ResampleDesc</a> object which stands for resample description and a <a class="reference external" href="../_static/rdocs/mlr/ResampleInstance-class.html">ResampleInstance</a>
object. These can be generated by means of the factory methods <a class="reference external" href="../_static/rdocs/mlr/makeResampleDesc.html">makeResampleDesc</a>
and <a class="reference external" href="../_static/rdocs/mlr/makeResampleInstance.html">makeResampleInstance</a>.</p>
<p>For every resampling strategy there is a description class inheriting
from <a class="reference external" href="../_static/rdocs/mlr/ResampleDesc-class.html">ResampleDesc</a> (which completely characterizes the necessary
parameters) and a class inheriting from <a class="reference external" href="../_static/rdocs/mlr/ResampleInstance-class.html">ResampleInstance</a>. This latter
class takes the description object and takes care of the random
drawing of indices. While this seems overly complicated, it is
necessary as sometimes one only wants to describe the drawing process,
while in other instances one wants to create the concrete index
sets. Also, there are convenience methods to make the construction
process as easy as possible.</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> <span class="c1">## get the cv.instance directly</span>
<span class="o">&gt;</span> rdesc <span class="o">&lt;-</span> makeResampleDesc<span class="p">(</span><span class="s">&quot;CV&quot;</span><span class="p">,</span> iters <span class="o">=</span> <span class="m">10</span><span class="p">)</span>
<span class="o">&gt;</span> rinst  <span class="o">&lt;-</span> makeResampleInstance<span class="p">(</span>rdesc<span class="p">,</span> size <span class="o">=</span> nrow<span class="p">(</span>iris<span class="p">))</span>
</pre></div>
</div>
<p>Asking the <a class="reference external" href="../_static/rdocs/mlr/ResampleDesc-class.html">ResampleDesc</a> or <a class="reference external" href="../_static/rdocs/mlr/ResampleInstance-class.html">ResampleInstance</a> objects for further
information is easy, just inspect their slots: operator:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> <span class="c1">## description object</span>
<span class="o">&gt;</span> <span class="c1">## number of iterations</span>
<span class="o">&gt;</span> rdesc<span class="p">$</span>iters
<span class="o">&gt;</span> <span class="c1">## resample.instance object</span>
<span class="o">&gt;</span> <span class="c1">## number of iterations</span>
<span class="o">&gt;</span> rinst<span class="p">$</span>desc<span class="p">$</span>iters
<span class="o">&gt;</span> rinst<span class="p">$</span>train.inds<span class="p">[[</span><span class="m">3</span><span class="p">]]</span>
<span class="o">&gt;</span> rinst<span class="p">$</span>test.inds<span class="p">[[</span><span class="m">3</span><span class="p">]]</span>
</pre></div>
</div>
<p>Please refer to the help pages of the specific classes for a complete
list of getters.</p>
</div>
<div class="section" id="included-resampling-strategies">
<h2>6.4. Included resampling strategies<a class="headerlink" href="#included-resampling-strategies" title="Permalink to this headline">¶</a></h2>
<p>The package comes with a couple of predefined strategies.</p>
<ul class="simple">
<li>&#8216;Subsample&#8217; for subsampling,</li>
<li>&#8216;Holdout&#8217; for holdout,</li>
<li>&#8216;CV&#8217; for cross-validation,</li>
<li>&#8216;LOO&#8217; for leave-one-out,</li>
<li>&#8216;StratCV&#8217; for stratified cross-validation,</li>
<li>&#8216;RepCV&#8217; for repeated cross-validation,</li>
<li>&#8216;Bootstrap&#8217; for out-of-bag bootstrap.</li>
</ul>
<div class="section" id="subsampling">
<h3>6.4.1. Subsampling<a class="headerlink" href="#subsampling" title="Permalink to this headline">¶</a></h3>
<p>In each iteration <span class="math">i</span> the data set <span class="math">D</span> is randomly partitioned into a
training and a test set according to a given percentage (maybe 2/3
training, 1/3 test set). If there is just one iteration, the strategy
is commonly called <cite>holdout</cite> or <cite>test sample estimation</cite>.</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> rdesc <span class="o">&lt;-</span> makeResampleDesc<span class="p">(</span><span class="s">&quot;Subsample&quot;</span><span class="p">,</span> iters <span class="o">=</span> <span class="m">10</span><span class="p">,</span> split <span class="o">=</span> <span class="m">2</span><span class="o">/</span><span class="m">3</span><span class="p">)</span>
<span class="o">&gt;</span> rdesc <span class="o">&lt;-</span> makeResampleDesc<span class="p">(</span><span class="s">&quot;Subsample&quot;</span><span class="p">,</span> iters <span class="o">=</span> <span class="m">1</span><span class="p">,</span> split <span class="o">=</span> <span class="m">2</span><span class="o">/</span><span class="m">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="k-fold-cross-validation">
<h3>6.4.2. <cite>k</cite>-fold cross-validation<a class="headerlink" href="#k-fold-cross-validation" title="Permalink to this headline">¶</a></h3>
<p>The data set is partitioned into <span class="math">k</span> subsets of (nearly) equal size.
In the <span class="math">i</span>-th step of the <span class="math">k</span> iterations the <span class="math">i</span>-th subset is
used as a test set, while the remaining parts form the training set.</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> rdesc <span class="o">&lt;-</span> makeResampleDesc<span class="p">(</span><span class="s">&quot;CV&quot;</span><span class="p">,</span> iters <span class="o">=</span> <span class="m">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="bootstrapping">
<h3>6.4.3. Bootstrapping<a class="headerlink" href="#bootstrapping" title="Permalink to this headline">¶</a></h3>
<p><span class="math">B</span> new data sets <span class="math">D_1</span> to <span class="math">D_B</span> are drawn from
<span class="math">D</span> with replacement, each of the same size as <span class="math">D</span>.
In the <span class="math">i</span>-th iteration <span class="math">D_i</span> forms the training set,
while the remaining elements from <span class="math">D</span> not occuring in the training set
form the test set.</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> rdesc <span class="o">&lt;-</span> makeResampleDesc<span class="p">(</span><span class="s">&quot;Bootstrap&quot;</span><span class="p">,</span> iters <span class="o">=</span> <span class="m">10</span><span class="p">)</span>
</pre></div>
</div>
<p>&lt;p&gt;&lt;img src=&#8221;pics/resampling.[desc, instance].png&#8221; width=&#8221;40%&#8221;  border=&#8221;1&#8221; alt=&#8221;&#8220;&gt;&lt;/p&gt;</p>
<p>&lt;p&gt;&lt;img src=&#8221;pics/Nested_Resampling.png&#8221; width=&#8221;60%&#8221;  border=&#8221;1&#8221; alt=&#8221;&#8220;&gt;&lt;/p&gt;</p>
</div>
</div>
<div class="section" id="evaluation-of-predictions-after-resampling">
<h2>6.5. Evaluation of Predictions after Resampling<a class="headerlink" href="#evaluation-of-predictions-after-resampling" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="../_static/rdocs/mlr/resample.html">resample</a> function evaluates the performance of your learner using
a certain resampling strategy for a given machine learning task.</p>
<p>When you use some resampling strategy, <strong>mlr</strong> offers the following
possibilities to evaluate your predictions: Every single resampling
iteration is handled as described in the explanation above, i.e. you
train a model on a training part of the data set, predict on test set
and compare predicted and true label w.r.t. some performance
measure. This is proceeded for every iteration so that you have
e.g. ten performance values in the case of 10-fold cross-validation.
The question arises, how to aggregate those values. You can specify
that explicitly, the default is the mean. Let&#8217;s have a look at an
example</p>
<p>object of class <a class="reference external" href="../_static/rdocs/mlr/ResamplePrediction-class.html">ResamplePrediction</a> ...</p>
<div class="section" id="id1">
<h3>6.5.1. Classification example<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>For the example code, we use the standard iris data set and compare
with 10-fold cross-validation a Decision Tree and the Linear Discriminant
Analysis:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> <span class="c1">## Classification task</span>
<span class="o">&gt;</span> task <span class="o">&lt;-</span> makeClassifTask<span class="p">(</span>data <span class="o">=</span> iris<span class="p">,</span> target <span class="o">=</span> <span class="s">&quot;Species&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="c1">## Resample instance for Cross-validation</span>
<span class="o">&gt;</span> rdesc <span class="o">&lt;-</span> makeResampleDesc<span class="p">(</span><span class="s">&quot;CV&quot;</span><span class="p">,</span> iters <span class="o">=</span> <span class="m">3</span><span class="p">)</span>
<span class="o">&gt;</span> rinst <span class="o">&lt;-</span> makeResampleInstance<span class="p">(</span>rdesc<span class="p">,</span> task <span class="o">=</span> task<span class="p">)</span>
</pre></div>
</div>
<p>Now we fit a decision tree for each fold and measure both the mean misclassification
error (<cite>mmce</cite>) and the accuracy (<cite>acc</cite>):</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> <span class="c1">## Merge learner, i.e. Decision Tree, classification task ct and resample instance rin</span>
<span class="o">&gt;</span> lrn <span class="o">&lt;-</span> makeLearner<span class="p">(</span><span class="s">&quot;classif.rpart&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> r1 <span class="o">&lt;-</span> resample<span class="p">(</span>lrn<span class="p">,</span> task<span class="p">,</span> rinst<span class="p">)</span>
</pre></div>
</div>
<p>Let&#8217;s set a couple of hyperparameters for rpart</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> lrn1 <span class="o">&lt;-</span> makeLearner<span class="p">(</span><span class="s">&quot;classif.rpart&quot;</span><span class="p">,</span> minsplit <span class="o">=</span> <span class="m">10</span><span class="p">,</span> cp <span class="o">=</span> <span class="m">0.03</span><span class="p">)</span>
<span class="o">&gt;</span> r1 <span class="o">&lt;-</span> resample<span class="p">(</span>lrn1<span class="p">,</span> task<span class="p">,</span> rinst<span class="p">,</span> list<span class="p">(</span>mmce<span class="p">,</span> acc<span class="p">))</span>
<span class="o">&gt;</span> <span class="c1">## Second resample for LDA as learner</span>
<span class="o">&gt;</span> lrn2 <span class="o">&lt;-</span> makeLearner<span class="p">(</span><span class="s">&quot;classif.lda&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> r2 <span class="o">&lt;-</span> resample<span class="p">(</span>lrn2<span class="p">,</span> task<span class="p">,</span> rinst<span class="p">,</span> list<span class="p">(</span>mmce<span class="p">,</span> acc<span class="p">))</span>
<span class="o">&gt;</span> <span class="c1">## Let&#39;s see how well both classifiers did w.r.t mean misclassification error and accuracy</span>
<span class="o">&gt;</span> r1
<span class="p">$</span>measures.train
  iter mmce acc
<span class="m">1</span>    <span class="m">1</span>   <span class="kc">NA</span>  <span class="kc">NA</span>
<span class="m">2</span>    <span class="m">2</span>   <span class="kc">NA</span>  <span class="kc">NA</span>
<span class="m">3</span>    <span class="m">3</span>   <span class="kc">NA</span>  <span class="kc">NA</span>

<span class="p">$</span>measures.test
  iter mmce  acc
<span class="m">1</span>    <span class="m">1</span> <span class="m">0.08</span> <span class="m">0.92</span>
<span class="m">2</span>    <span class="m">2</span> <span class="m">0.02</span> <span class="m">0.98</span>
<span class="m">3</span>    <span class="m">3</span> <span class="m">0.06</span> <span class="m">0.94</span>

<span class="p">$</span>aggr
mmce.test.mean  acc.test.mean
    <span class="m">0.05333333</span>     <span class="m">0.94666667</span>

<span class="p">$</span>pred
Resampled Prediction for:
Resample description: cross<span class="o">-</span>validation with <span class="m">3</span> iterations.
Predict: test
Stratification: <span class="kc">FALSE</span>

<span class="p">$</span>models
<span class="kc">NULL</span>

<span class="p">$</span>extract
<span class="p">$</span>extract<span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
<span class="kc">NULL</span>

<span class="p">$</span>extract<span class="p">[[</span><span class="m">2</span><span class="p">]]</span>
<span class="kc">NULL</span>

<span class="p">$</span>extract<span class="p">[[</span><span class="m">3</span><span class="p">]]</span>
<span class="kc">NULL</span>
<span class="o">&gt;</span> r2
<span class="p">$</span>measures.train
  iter mmce acc
<span class="m">1</span>    <span class="m">1</span>   <span class="kc">NA</span>  <span class="kc">NA</span>
<span class="m">2</span>    <span class="m">2</span>   <span class="kc">NA</span>  <span class="kc">NA</span>
<span class="m">3</span>    <span class="m">3</span>   <span class="kc">NA</span>  <span class="kc">NA</span>

<span class="p">$</span>measures.test
  iter mmce  acc
<span class="m">1</span>    <span class="m">1</span> <span class="m">0.06</span> <span class="m">0.94</span>
<span class="m">2</span>    <span class="m">2</span> <span class="m">0.00</span> <span class="m">1.00</span>
<span class="m">3</span>    <span class="m">3</span> <span class="m">0.02</span> <span class="m">0.98</span>

<span class="p">$</span>aggr
mmce.test.mean  acc.test.mean
    <span class="m">0.02666667</span>     <span class="m">0.97333333</span>

<span class="p">$</span>pred
Resampled Prediction for:
Resample description: cross<span class="o">-</span>validation with <span class="m">3</span> iterations.
Predict: test
Stratification: <span class="kc">FALSE</span>

<span class="p">$</span>models
<span class="kc">NULL</span>

<span class="p">$</span>extract
<span class="p">$</span>extract<span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
<span class="kc">NULL</span>

<span class="p">$</span>extract<span class="p">[[</span><span class="m">2</span><span class="p">]]</span>
<span class="kc">NULL</span>

<span class="p">$</span>extract<span class="p">[[</span><span class="m">3</span><span class="p">]]</span>
<span class="kc">NULL</span>
</pre></div>
</div>
<p>If we want to see the individual values for each fold on the test set, we can access
the <cite>measures.test</cite> element of the result list:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> r1<span class="p">$</span>measures.test
  iter mmce  acc
<span class="m">1</span>    <span class="m">1</span> <span class="m">0.08</span> <span class="m">0.92</span>
<span class="m">2</span>    <span class="m">2</span> <span class="m">0.02</span> <span class="m">0.98</span>
<span class="m">3</span>    <span class="m">3</span> <span class="m">0.06</span> <span class="m">0.94</span>
</pre></div>
</div>
<p>The aggregated performance values are stored in the <cite>aggr</cite> list element:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> r1<span class="p">$</span>aggr
mmce.test.mean  acc.test.mean
    <span class="m">0.05333333</span>     <span class="m">0.94666667</span>
</pre></div>
</div>
<p>As you can see above, in every fold of the 3-fold cross-validation you
get one mean misclassification error (0.06, 0.08, 0.10) and after all
three runs you aggregate them by mean to one value (0.08). Having a
look at the single losses is of course possible as well.</p>
</div>
<div class="section" id="id2">
<h3>6.5.2. Regression example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Now we use the BostonHousing data and compare the results of a Neural Net and a k-Nearest-Neighbor regression with out-of-bag bootstraping.</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> library<span class="p">(</span><span class="s">&quot;mlr&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> library<span class="p">(</span><span class="s">&quot;mlbench&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> data<span class="p">(</span>BostonHousing<span class="p">)</span>
<span class="o">&gt;</span> <span class="c1">## Regression task</span>
<span class="o">&gt;</span> task <span class="o">&lt;-</span> makeRegrTask<span class="p">(</span>data <span class="o">=</span> BostonHousing<span class="p">,</span> target <span class="o">=</span> <span class="s">&quot;medv&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="c1">## Resample instance for bootstraping</span>
<span class="o">&gt;</span> rdesc <span class="o">&lt;-</span> makeResampleDesc<span class="p">(</span><span class="s">&quot;Bootstrap&quot;</span><span class="p">,</span> iters <span class="o">=</span> <span class="m">3</span><span class="p">)</span>
<span class="o">&gt;</span> rinst <span class="o">&lt;-</span> makeResampleInstance<span class="p">(</span>rdesc<span class="p">,</span> task <span class="o">=</span> task<span class="p">)</span>
<span class="o">&gt;</span> ms <span class="o">&lt;-</span> list<span class="p">(</span>mse<span class="p">,</span> medae<span class="p">)</span>
<span class="o">&gt;</span> lrn1 <span class="o">&lt;-</span> makeLearner<span class="p">(</span><span class="s">&quot;regr.nnet&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> r1 <span class="o">&lt;-</span> resample<span class="p">(</span>lrn1<span class="p">,</span> task<span class="p">,</span> rinst<span class="p">,</span> measures <span class="o">=</span> ms<span class="p">)</span>
<span class="c1"># weights:  46</span>
initial  value <span class="m">309745.015990</span>
final  value <span class="m">41916.962549</span>
converged
<span class="c1"># weights:  46</span>
initial  value <span class="m">291875.930515</span>
iter  <span class="m">10</span> value <span class="m">42481.226829</span>
final  value <span class="m">41954.967409</span>
converged
<span class="c1"># weights:  46</span>
initial  value <span class="m">307019.121595</span>
final  value <span class="m">50052.862549</span>
converged
<span class="o">&gt;</span> <span class="c1">## Another resampling for the k-Nearest Neighbor regression</span>
<span class="o">&gt;</span> lrn2 <span class="o">&lt;-</span> makeLearner<span class="p">(</span><span class="s">&quot;regr.kknn&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> r2 <span class="o">&lt;-</span> resample<span class="p">(</span>lrn2<span class="p">,</span> task<span class="p">,</span> rinst<span class="p">,</span> measures <span class="o">=</span> ms<span class="p">)</span>
<span class="o">&gt;</span> <span class="c1"># Now let&#39;s compare both methods regarding the mse (mean squared error) and the medae (median of absolute errors)</span>
<span class="o">&gt;</span> r1<span class="p">$</span>measures.test
  iter      mse    medae
<span class="m">1</span>    <span class="m">1</span> <span class="m">82.03778</span> <span class="m">4.290316</span>
<span class="m">2</span>    <span class="m">2</span> <span class="m">74.50829</span> <span class="m">4.387217</span>
<span class="m">3</span>    <span class="m">3</span> <span class="m">71.95376</span> <span class="m">5.064229</span>
<span class="o">&gt;</span> r2<span class="p">$</span>measures.test
  iter      mse    medae
<span class="m">1</span>    <span class="m">1</span> <span class="m">25.93059</span> <span class="m">1.479387</span>
<span class="m">2</span>    <span class="m">2</span> <span class="m">13.58193</span> <span class="m">1.658982</span>
<span class="m">3</span>    <span class="m">3</span> <span class="m">20.58491</span> <span class="m">1.503642</span>
</pre></div>
</div>
<p>...</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
<h3>Table Of Contents</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="task.html">1. Learning Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="learner.html">2. Learners</a></li>
<li class="toctree-l2"><a class="reference internal" href="train.html">3. Training a Learner</a></li>
<li class="toctree-l2"><a class="reference internal" href="predict.html">4. Predicting Outcomes for New Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance.html">5. Evaluating Learner Performance</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">6. Resampling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#quick-start">6.1. Quick start</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#classification-example">6.1.1. Classification example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#regression-example">6.1.2. Regression example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#further-information">6.2. Further information</a></li>
<li class="toctree-l3"><a class="reference internal" href="#resample-descriptions-and-resample-instances">6.3. Resample descriptions and resample instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="#included-resampling-strategies">6.4. Included resampling strategies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#subsampling">6.4.1. Subsampling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#k-fold-cross-validation">6.4.2. <cite>k</cite>-fold cross-validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bootstrapping">6.4.3. Bootstrapping</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#evaluation-of-predictions-after-resampling">6.5. Evaluation of Predictions after Resampling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">6.5.1. Classification example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">6.5.2. Regression example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tune.html">7. Tuning Hyperparameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="variable_selection.html">8. Variable Selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="benchmark_experiments.html">9. Benchmark Experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="benchmark_analysis.html">10. Benchmark Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="roc_analysis.html">11. ROC Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../integrated_learners.html">Integrated Learners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extension_points/index.html">Extension Points</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../literature.html">Relevant Literature</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="performance.html" title="5. Evaluating Learner Performance"
             >previous</a> |
          <a href="tune.html" title="7. Tuning Hyperparameters"
             >next</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2010-2011, Bernd Bischl et.al..
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>