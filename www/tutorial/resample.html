

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Resampling Learners &mdash; mlr - Machine Learning in R</title>
    <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="mlr - Machine Learning in R" href="../index.html" />
    <link rel="up" title="Tutorial" href="index.html" />
    <link rel="next" title="Evaluateing Learner Performance" href="performance.html" />
    <link rel="prev" title="Predicting Outcomes for New Data" href="predict.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
        <p class="logo"><a href="../index.html">
            <img class="logo" src="../_static/mlr_logo-120x64.png" alt="mlr logo"/>
        </a></p>
        <h1><a href="../index.html">mlr - Machine Learning in R</a></h1>
        <div class="rel">
          <a href="predict.html" title="Predicting Outcomes for New Data"
             accesskey="P">previous</a> |
          <a href="performance.html" title="Evaluateing Learner Performance"
             accesskey="N">next</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="resampling-learners">
<h1>Resampling Learners<a class="headerlink" href="#resampling-learners" title="Permalink to this headline">¶</a></h1>
<p>Resampling strategies concern the process of sampling new data sets
from your data set <img class="math" src="../_images/math/9ffb448918db29f2a72f8f87f421b3b3cad18f95.png" alt="D" style="vertical-align: 0px"/> under examination. One wants to generate
various training and test sets, which the learning method can be
fitted and validated on. Here it is assumed that every resampling
strategy consists of a couple of iterations, where for each one there
are indices into <img class="math" src="../_images/math/9ffb448918db29f2a72f8f87f421b3b3cad18f95.png" alt="D" style="vertical-align: 0px"/>, defining the respective training and test
sets. These iterations are implemented by storing the index set in a
so called <a class="reference external" href="_static/rdoc/mlr/ResampleInstance-class.html">ResampleInstance</a> object. The reasons for having the user
create this data explicitly and not just set an option in a R function
to choose the resampling method are:</p>
<ul>
<li><p class="first">It is easier to create paired experiments, where you train and test
different methods on exactly the same sets, especially when you want
to add another method to a comparison experiment you already did.</p>
</li>
<li><p class="first">It is easy to add other resampling methods later on. You can
simply use S4 inheritance, derive from the <a class="reference external" href="_static/rdoc/mlr/ResampleInstance-class.html">ResampleInstance</a>
class, but you do not have to touch any methods that use the
resampling strategy.</p>
<blockquote>
<div><p><img alt="Resampling illustration" class="align-middle" src="../_images/resampling4.png" style="width: 40em;" /></p>
</div></blockquote>
</li>
</ul>
<div class="section" id="included-strategies">
<h2>Included strategies<a class="headerlink" href="#included-strategies" title="Permalink to this headline">¶</a></h2>
<p>The packages come with a couple of predefined strategies</p>
<div class="section" id="subsampling">
<h3>Subsampling<a class="headerlink" href="#subsampling" title="Permalink to this headline">¶</a></h3>
<p>In each iteration i the data set D is randomly partitioned into a
training and a test set according to a given percentage (maybe 2/3
training, 1/3 test set). If there is just one iteration, the strategy
is commonly called &lt;term&gt;holdout&lt;/term&gt; or &lt;term&gt;test sample
estimation&lt;/term&gt;.</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> rin <span class="o">&lt;-</span> makeResampleDesc<span class="p">(</span><span class="s">&quot;subsample&quot;</span><span class="p">,</span> iters <span class="o">=</span> <span class="m">10</span><span class="p">,</span> split <span class="o">=</span> <span class="m">2</span><span class="o">/</span><span class="m">3</span><span class="p">)</span>
<span class="o">&gt;</span> rin <span class="o">&lt;-</span> makeResampleDesc<span class="p">(</span><span class="s">&quot;subsample&quot;</span><span class="p">,</span> iters <span class="o">=</span> <span class="m">1</span><span class="p">,</span> split <span class="o">=</span> <span class="m">2</span><span class="o">/</span><span class="m">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="k-fold-cross-validation">
<h3><cite>k</cite>-fold cross-validation<a class="headerlink" href="#k-fold-cross-validation" title="Permalink to this headline">¶</a></h3>
<p>The data set is partitioned in k subparts of (nearly) equal size. In the i.th step of the k iterations,
the i.th subpart is used as a test set, while the remaining parts form the training set.&lt;/p&gt;</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> rin <span class="o">&lt;-</span> makeResampleDesc<span class="p">(</span><span class="s">&quot;CV&quot;</span><span class="p">,</span> iters <span class="o">=</span> <span class="m">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="bootstrapping">
<h3>Bootstrapping<a class="headerlink" href="#bootstrapping" title="Permalink to this headline">¶</a></h3>
<p><img class="math" src="../_images/math/ff5fb3d775862e2123b007eb4373ff6cc1a34d4e.png" alt="B" style="vertical-align: 0px"/> new data sets <img class="math" src="../_images/math/88c7f79185a0b48d33454e85f44b4bfdf81d2420.png" alt="D_1" style="vertical-align: -4px"/> to <img class="math" src="../_images/math/bc590e817d26474b1c4435cab1e9b4883d6ad4ee.png" alt="D_B" style="vertical-align: -3px"/> are drawn from
<img class="math" src="../_images/math/9ffb448918db29f2a72f8f87f421b3b3cad18f95.png" alt="D" style="vertical-align: 0px"/> with replacement, each of the same size as D. In the <img class="math" src="../_images/math/34857b3ba74ce5cd8607f3ebd23e9015908ada71.png" alt="i" style="vertical-align: 0px"/>-th
iteration <img class="math" src="../_images/math/8dfcbccbc64a91b700ee90d800d2d0a0c2cda992.png" alt="D_i" style="vertical-align: -3px"/> forms the training set, while the remaining elements
not occuring in the training set form the test set.</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> rin <span class="o">&lt;-</span> makeResampleDesc<span class="p">(</span><span class="s">&quot;bs&quot;</span><span class="p">,</span> iters <span class="o">=</span> <span class="m">10</span><span class="p">)</span>
</pre></div>
</div>
<p>&lt;p&gt;&lt;img src=&#8221;pics/resampling.[desc, instance].png&#8221; width=&#8221;40%&#8221;  border=&#8221;1&#8221; alt=&#8221;&#8220;&gt;&lt;/p&gt;</p>
<p>&lt;p&gt;&lt;img src=&#8221;pics/Nested_Resampling.png&#8221; width=&#8221;60%&#8221;  border=&#8221;1&#8221; alt=&#8221;&#8220;&gt;&lt;/p&gt;</p>
</div>
</div>
<div class="section" id="further-details">
<h2>Further details<a class="headerlink" href="#further-details" title="Permalink to this headline">¶</a></h2>
<p>For every resampling strategy there is a description class inheriting
from <a class="reference external" href="_static/rdoc/mlr/ResampleDesc-class.html">ResampleDesc</a> (which completely characterizes the necessary
parameters) and a class inheriting from <a class="reference external" href="_static/rdoc/mlr/ResampleInstance-class.html">ResampleInstance</a>. This latter
class takes the description object and takes care of the random
drawing of indices. While this seems overly complicated, it is
necessary as sometimes one only wants to describe the drawing process,
while in other instances one wants to create the concrete index
sets. Also, there are convenience methods, to make the construction
process as easy as possible. Here is an example for cross-validation:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> desc <span class="o">&lt;-</span> new<span class="p">(</span><span class="s">&quot;cv.desc&quot;</span><span class="p">,</span> iters <span class="o">=</span> <span class="m">10</span><span class="p">)</span>
<span class="o">&gt;</span> rin <span class="o">&lt;-</span> new<span class="p">(</span><span class="s">&quot;cv.instance&quot;</span><span class="p">,</span> desc <span class="o">=</span> desc<span class="p">,</span> size <span class="o">=</span> nrow<span class="p">(</span>iris<span class="p">))</span>
<span class="o">&gt;</span> rin <span class="o">&lt;-</span> makeResampleInstance<span class="p">(</span><span class="s">&quot;CV&quot;</span><span class="p">,</span> iters <span class="o">=</span> <span class="m">10</span><span class="p">,</span> size <span class="o">=</span> nrow<span class="p">(</span>iris<span class="p">))</span>
</pre></div>
</div>
<p>Asking the <a class="reference external" href="_static/rdoc/mlr/ResampleDesc-class.html">ResampleDesc</a> or <a class="reference external" href="_static/rdoc/mlr/ResampleInstance-class.html">ResampleInstance</a> objects for further
information is easy, just inspect their slots: operator:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> desc<span class="p">@</span>iters
<span class="o">&gt;</span> rin<span class="p">@</span>iters
<span class="o">&gt;</span> rin<span class="p">[</span><span class="s">&quot;train.inds&quot;</span><span class="p">,</span> <span class="m">3</span><span class="p">]</span>
<span class="o">&gt;</span> rin<span class="p">[</span><span class="s">&quot;test.inds&quot;</span><span class="p">,</span> <span class="m">3</span><span class="p">]</span>
<span class="o">&gt;</span> rin<span class="p">[</span><span class="s">&quot;train.inds&quot;</span><span class="p">,</span> c<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="p">)]</span>
<span class="o">&gt;</span> rin<span class="p">[</span><span class="s">&quot;test.inds&quot;</span><span class="p">,</span> c<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="p">)]</span>
</pre></div>
</div>
<p>Please refer to the help pages of the specific classes for a complete
list of getters.</p>
<p>The <a class="reference external" href="_static/rdoc/mlr/resample.html">resample</a> function evaluates the performance of your learner using
a certain resampling strategy for a given machine learning task.</p>
<p>For the example code, we use the standard iris data set and compare
with cross-validation a Decision Tree and the Linear Discriminant
Analysis:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> ct <span class="o">&lt;-</span> makeClassifTask<span class="p">(</span>data <span class="o">=</span> iris<span class="p">,</span> target <span class="o">=</span> <span class="s">&quot;Species&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> rin <span class="o">&lt;-</span> makeResampleDesc<span class="p">(</span><span class="s">&quot;CV&quot;</span><span class="p">,</span> iters <span class="o">=</span> <span class="m">3</span><span class="p">)</span>
<span class="o">&gt;</span> rin <span class="o">&lt;-</span> makeResampleInstance<span class="p">(</span>rin<span class="p">,</span> task <span class="o">=</span> ct<span class="p">)</span>
<span class="o">&gt;</span> f1 <span class="o">&lt;-</span> resample<span class="p">(</span><span class="s">&quot;classif.rpart&quot;</span><span class="p">,</span> ct<span class="p">,</span> rin<span class="p">)</span>
<span class="o">&gt;</span> wl <span class="o">&lt;-</span> makeLearner<span class="p">(</span><span class="s">&quot;classif.rpart&quot;</span><span class="p">,</span> minsplit <span class="o">=</span> <span class="m">10</span><span class="p">,</span> cp <span class="o">=</span> <span class="m">0.03</span><span class="p">)</span>
<span class="o">&gt;</span> f1 <span class="o">&lt;-</span> resample<span class="p">(</span>wl<span class="p">,</span> ct<span class="p">,</span> rin<span class="p">,</span> list<span class="p">(</span>mmce<span class="p">,</span> acc<span class="p">))</span>
<span class="o">&gt;</span> f2 <span class="o">&lt;-</span> resample<span class="p">(</span><span class="s">&quot;classif.lda&quot;</span><span class="p">,</span> ct<span class="p">,</span> rin<span class="p">,</span> list<span class="p">(</span>mmce<span class="p">,</span> acc<span class="p">))</span>
<span class="o">&gt;</span> f1
<span class="p">$</span>measures.train
  iter mmce acc
<span class="m">1</span>    <span class="m">1</span>   <span class="kc">NA</span>  <span class="kc">NA</span>
<span class="m">2</span>    <span class="m">2</span>   <span class="kc">NA</span>  <span class="kc">NA</span>
<span class="m">3</span>    <span class="m">3</span>   <span class="kc">NA</span>  <span class="kc">NA</span>

<span class="p">$</span>measures.test
  iter mmce  acc
<span class="m">1</span>    <span class="m">1</span> <span class="m">0.04</span> <span class="m">0.96</span>
<span class="m">2</span>    <span class="m">2</span> <span class="m">0.10</span> <span class="m">0.90</span>
<span class="m">3</span>    <span class="m">3</span> <span class="m">0.04</span> <span class="m">0.96</span>

<span class="p">$</span>aggr
mmce.test.mean   mmce.test.sd  acc.test.mean    acc.test.sd
    <span class="m">0.06000000</span>     <span class="m">0.03464102</span>     <span class="m">0.94000000</span>     <span class="m">0.03464102</span>

<span class="p">$</span>pred
Resampled Prediction for: cross<span class="o">-</span>validation with <span class="m">3</span> iterations.
Predict: test


<span class="p">$</span>models
<span class="kc">NULL</span>

<span class="p">$</span>extract
<span class="p">$</span>extract<span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
<span class="kc">NULL</span>

<span class="p">$</span>extract<span class="p">[[</span><span class="m">2</span><span class="p">]]</span>
<span class="kc">NULL</span>

<span class="p">$</span>extract<span class="p">[[</span><span class="m">3</span><span class="p">]]</span>
<span class="kc">NULL</span>
<span class="o">&gt;</span> f2
<span class="p">$</span>measures.train
  iter mmce acc
<span class="m">1</span>    <span class="m">1</span>   <span class="kc">NA</span>  <span class="kc">NA</span>
<span class="m">2</span>    <span class="m">2</span>   <span class="kc">NA</span>  <span class="kc">NA</span>
<span class="m">3</span>    <span class="m">3</span>   <span class="kc">NA</span>  <span class="kc">NA</span>

<span class="p">$</span>measures.test
  iter mmce  acc
<span class="m">1</span>    <span class="m">1</span> <span class="m">0.02</span> <span class="m">0.98</span>
<span class="m">2</span>    <span class="m">2</span> <span class="m">0.04</span> <span class="m">0.96</span>
<span class="m">3</span>    <span class="m">3</span> <span class="m">0.02</span> <span class="m">0.98</span>

<span class="p">$</span>aggr
mmce.test.mean   mmce.test.sd  acc.test.mean    acc.test.sd
    <span class="m">0.02666667</span>     <span class="m">0.01154701</span>     <span class="m">0.97333333</span>     <span class="m">0.01154701</span>

<span class="p">$</span>pred
Resampled Prediction for: cross<span class="o">-</span>validation with <span class="m">3</span> iterations.
Predict: test


<span class="p">$</span>models
<span class="kc">NULL</span>

<span class="p">$</span>extract
<span class="p">$</span>extract<span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
<span class="kc">NULL</span>

<span class="p">$</span>extract<span class="p">[[</span><span class="m">2</span><span class="p">]]</span>
<span class="kc">NULL</span>

<span class="p">$</span>extract<span class="p">[[</span><span class="m">3</span><span class="p">]]</span>
<span class="kc">NULL</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
<h3>Table Of Contents</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="train.html">Training a learner</a></li>
<li class="toctree-l2"><a class="reference internal" href="predict.html">Predicting Outcomes for New Data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Resampling Learners</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#included-strategies">Included strategies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#subsampling">Subsampling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#k-fold-cross-validation"><cite>k</cite>-fold cross-validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bootstrapping">Bootstrapping</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#further-details">Further details</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="performance.html">Evaluateing Learner Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="tune.html">Tuning hyperparamaters</a></li>
<li class="toctree-l2"><a class="reference internal" href="learner.html">Integrated learners</a></li>
<li class="toctree-l2"><a class="reference internal" href="variable_selection.html">Variable Selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="benchmark_experiments.html">Benchmark Experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="benchmark_analysis.html">Benchmark Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="roc_analysis.html">ROC Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../concept/index.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/index.html">How-Tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrated_learners.html">Integrated Learners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../literature.html">Relevant Literature</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="predict.html" title="Predicting Outcomes for New Data"
             >previous</a> |
          <a href="performance.html" title="Evaluateing Learner Performance"
             >next</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2010-2011, Bernd Bischl et.al..
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>